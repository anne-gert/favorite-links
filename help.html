<!DOCTYPE html>
<html>

<head>

<!-- This page may contain UTF-8 encoded text. -->
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Favorites and ToDo - Help</title>

<style>
/* CSS styles {{{ */

/****************************************************************************
 * Global definitions
 ****************************************************************************/

/* Color palette - dark theme */
.dark-theme {
	--foreground: #DDDDDD;
	--background: #2E323B;
	--accent-color: #50A0EE;
	--block-foreground: #000000;
	--block-background: #C9CDD0;
	--block-border: #EEEEEE;
	--selection-foreground: #000000;
	--selection-background: #DDDDFF;
	--code-foreground: #FFFFFF;
	--code-background: #292D36;
	--link-color: #6666FF;
	--disabled-color: #888888;
	--error-foreground: #FF6600;
	--error-background: #FFD8C0;
	--error-border: var(--error-foreground);
}

/* Color palette - light theme */
.light-theme {
	--foreground: #444444;
	--background: #E8F0F8;
	--accent-color: #4444EE;
	--block-foreground: #222222;
	--block-background: #D9DDE0;
	--block-border: #666666;
	--selection-foreground: #FFFFFF;
	--selection-background: #000099;
	--code-foreground: #000000;
	--code-background: #E3EBF3;
	--link-color: #2222AA;
	--disabled-color: #888888;
	--error-foreground: #FF8844;
	--error-background: #FFEEDD;
	--error-border: #FFBB88;
}

:root {
	/* Define variables that will be used on visible elements */
	--font-family: 'Segoe UI', 'Lucida Grande', Helvetica, sans-serif;
	--font-size: 100%
	/* Set default font and size */
	font-family: var(--font-family);
	font-size: 12pt;  /* absolute, so --font-size can be relative too */
}

body, input, textarea, button {
	font-family: var(--font-family);
	font-size: var(--font-size);
}

body {
	color: var(--accent-color); background: var(--background);
}
::selection {
	color: var(--selection-foreground); background: var(--selection-background);
}


/****************************************************************************
 * Shared styles for displaying text-blocks
 * These syles are shared between all pages
 ****************************************************************************/

.text-block {
	color: var(--foreground); background: var(--background);
}
.text-block h1, .text-block h2, .text-block h3, .text-block dt {
	color: var(--accent-color);
}
.text-block code, .text-block pre {
	color: var(--code-foreground); background: var(--code-background);
}
.text-block code {
	padding: 0.1em 0.4em;
}
.text-block pre {
	padding: 0.6em 1em;
	margin: 0.5em 4em;
	overflow: scroll;
}
.text-block dt {
	display: inline;
}
.text-block a {
	color: var(--link-color);
	text-decoration: none;
}
.text-block a:hover {
	text-decoration: underline;
}
.text-block .important {
	color: var(--error-foreground);
}

/* }}} */
</style>

</head>

<body class="text-block dark-theme">


<h1>Favorites and ToDo - Help</h1>


<!-- The following section is also included as a text block in
DefaultLinks in favorites.html -->

<a name="description"></a>
<h2>Description</h2>

<p>
<a href="favorites.html">favorites.html</a> is a single page that can be
configured to show <u>links</u> and <u>todo lists</u>, organized in
<u>sections</u>, <u>blocks</u> and <u>items</u>. This configuration can be
downloaded via a URL and/or edited in the browser's local storage (see below).
<br>
This page can be set as home page in the browser's settings and as the Tab
start page via an add-on like <a
href="https://addons.mozilla.org/en-US/firefox/addon/new-tab-override/">New Tab
Override</a>.
</p>

<p>
Note that the home page can be a local file (with <code>file:///...</code>
URL) or an internet address (with <code>http://...</code> or
<code>https://...</code> URL) and that the tab start page can only be an
internet address.
</p>


<a name="usage"></a>
<h2>Usage</h2>

<p>
The standard usage is to open the page favorites.html (or possibly set it as
your home page). Upon first opening, it shows a default example page.  This
page can be edited by going to the Settings (gears (&#x2699;) icon) and just
edit and save the textual configuration. Optionally, this configuration can be
maintained in a separate text file and copy-pasted into the Settings.
<br>
Since GitHub provides for a way to serve HTML pages directly, this can be used
to open and use favorites.html directly from <a
href="https://html-preview.github.io/?url=https://github.com/anne-gert/favorite-links/master/favorites.html">GitHub</a>.
Save the target of this link to your home page and you're set.
</p>


<h3>Easy</h3>

<p>
The easiest method to get started is to copy the contents of the
example-links.txt file into the Settings text panel and start editing that.
<br>
The vsst majority of the lines will simply consist of indentation, name and
URL. Add a few <code>!search</code> options and that's it.
</p>

<p>
Many more things are possible, but you DON'T NEED to and can stop reading here.
If you want to, though, please continue reading any of these topics:
<ul>
<li><a href="external-files.html">Read/write online configuration</a>
<li><a href="#syntax">Configuration</a>
    <ul>
    <li><a href="#line-syntax">How to configure different options?</a>
    <li><a href="#link-syntax">Link syntax</a>
    <li><a href="#link-examples">Link examples</a>
    </ul>
<li><a href="#icons">Icons</a>
<li><a href="#checkboxes">Checkboxes</a>
<li><a href="#search-functions">Adding new search methods</a>
<li><a href="#themes">Theming</a>
</ul>
</p>

<hr>


<a name="syntax"></a>
<h2>Configuration Syntax</h2>

<p>
The configuration consists primarily of a list of <a
href="help.html#link-syntax">Link Definitions</a>.  The Links form an
hierarchical structure, indicated by the line's indentation:
<ul>
<li><dt>Section</dt>: The first indentation level is the Section. Sections are
    separated by horizontal lines.
<li><dt>Block</dt>: The second indentation level are the blocks within a
    Section. Each Block is a visual area that can be collapsed and expanded.
<li><dt>Item</dt>: The third indentation level are the Items that populate
    the Blocks.
<li><dt>SubItem</dt>: The fourth and higher indentation levels are SubItems
    that are displayed under their respective parent Items
</ul>
Each link can be a hyperlink, have an icon and/or a checkbox.
</p>

<p>
In addition to Links, the configuration also supports comments, different
web-search functions and other directives, see <a
href="help.html#line-syntax">Line Syntax</a> for details.
</p>

<!-- End of text to be included in text block -->


<a name="line-syntax"></a>
<h3>Line Syntax</h3>

<p>
Each line should be one of the following:
<ul>
  <li><dt>Empty lines</dt>: These are skipped.
  <li><dt>Comments</dt>: Lines that start with <code>//</code>, <code>;</code>
      or <code>#</code> are comments and skipped too.
  <li><dt>Folding</dt>: If a line ends with <code>{{{</code> or
      <code>}}}</code>, remove that.  These tags are used to facilitate folding
      in vim.
  <li><dt>Link Item</dt>: Specify a Link or ToDo item. See <a
      href="#link-syntax">below</a>.
  <li><dt>Separator</dt>: This is a line containing a name of 3 or more dashes
      (<code>---</code>).  It is rendered as an <code>&lt;hr
      class="separator"&gt;</code>.
  <li><dt>Page Title</dt>: The line <code>!title name</code> specifies the page
      title to be displayed.
  <li><dt>Theme</dt>: The line <code>!theme name</code> specifies the CSS class
      name to use for the theme. Currently 'auto' (default), 'dark-theme' and
      'light-theme' are defined, but custom themes can be defined with a Style
      Block. See <a href="#themes">below</a> on use cases.
  <li><dt>Font Size</dt>: The line <code>!size font-size</code> specifies the
      base font-size to use. All CSS length quantities can be used, e.g.
      '10pt' or '120%'. This feature is experimental.
  <li><dt>Blocks Collapsed</dt>: The line <code>!collapsed state</code>
      specifies how blocks are displayed when loaded:
      <ul>
      <li><dt>no</dt> (default): Blocks are expanded if not previously closed.
      <li><dt>yes</dt>: Blocks are closed if not previously expanded.
      <li><dt>always</dt>: Blocks are always closed (previous state is
          ignored).
      <li><dt>never</dt>: Blocks are always expanded (previous state is
          ignored).
      </ul>
  <li><dt>Search Buttons</dt>: The line <code>!search identifier | label |
      tooltip | icon | url-template</code> defines a search button to be
      displayed next to the search box.  See <a
      href="#search-functions">below</a> for more details.
  <li><dt>Icon Definitions</dt>: The line <code>!icondef name
      replacement</code> defines an icon. If a link uses
      <code>icon=name</code>, it will be replaced by whatever is defined for
      name.  This also works with the special words <code>none</code>,
      <code>empty</code>, <code>html:x</code>, etc.  It is also allowed to
      write this with an <code>=</code> between name and replacement. See <a
      href="#icons">Icons</a> for more on icons.
  <li><dt>Checkbox Definition</dt>: The line <code>!checkbox name options
      ...</code> defines a custom checkbox. See <a
      href="#checkboxes">Checkboxes</a> for more details.
  <li><dt>Text Block</dt>: A text block is the lines of text between
      <code>!text</code> and <code>!endtext</code>, which each should appear
      on a line of their own. The text block will be rendered at that
      location. It can contain any HTML
  <li><dt>Style Block</dt>: A style block is the lines of text between
      <code>!style</code> and <code>!endstyle</code>, which should contain CSS
      definitions. See <a href="#themes">Themes</a> for an example.
  <li><dt>Script Block</dt>: A script block is the lines of text between
      <code>!script</code> and <code>!endscript</code>, which should contain
      JavaScript code that is executed at the beginning of the page. See <a
      href="#search-functions">Search Functions</a> for an example.
  <li><dt>Automatic Upload Delay</dt>: Some events (like changing a checkbox
      value) triggers an upload if <a
      href="external-files.html#save-options">Online Save</a> has been set.
      To avoid many updates in quick succession, an upload delay can be set
      with <code>!auto-upload-delay value</code>, where value is a delay in
      seconds. Default is 3 seconds.
</ul>
</p>

<p>
<span class="important">Known Issue</span>: Once a !script block is added, it
can only be reset by completely reloading the page. Just commenting out the
script in the settings and saving will not unload the previous script, which is
still present in memory.
</p>

<p>
As an example, add the following to the settings:
<pre>
!script
let hue = 0;
const step = 5;
const interval = 50;
window.setInterval(() =&gt; document.body.style.backgroundColor = 'hsl(' + (hue += step) + 'deg, 100%, 20%)', interval);
!endscript
</pre>
This will set a timer handler that continuously changes the background color.
<br>
Now open the settings and make the following change:
<pre>
const interval = 60;
</pre>
When this is saved, the background starts to blink erraticly. After reloading
the page, it starts changing the color normally again.
<br>
The reason is that after saving the change, a <b>second</b> timer handler was
set and both timers interferred. The reload discards both timers and set a new
one in a clean page.
</p>


<a name="link-syntax"></a>
<h3>Link Syntax</h3>

<p>
Each Link is specified on a single line as follows:
<ul>
  <li><dt>Indentation</dt>: The amount of indentation determines the nesting
      depth:
      <ul>
        <li>Tabs are replace by 8 spaces.
	<li>If the number of spaces is bigger than that of the previous line,
	    increase nesting depth by 1.
	<li>If the number of spaces is less than that of the previous line,
	    decrease the nesting depth to that of the most recent line that has
	    an indentation that is strictly less than this line.
      </ul>
  <li><dt>&amp;</dt> continuation: If the item starts with <code>&amp;</code>,
      this item is regarded as a continuation of a group of items that are
      displayed on a single line.
  <li><dt>Name</dt>: Arbitrary string of characters.
      <ul>
        <li>If no name is given, the URL is used.
	<li>If the name is <code>_</code> and any of the following conditions
	    is met, no name is displayed. The conditions are:
	    <ul>
	      <li>An icon is present.
	      <li>It is not clickable, i.e. there is no URL.
	    </ul>
	    If none of these conditions are met, the <code>_</code> is
	    replaced by 'Heading', 'Block' or 'Item', depending on the
	    indentation level.
      </ul>
  <li><dt>URL</dt>: A string of non-whitespace characters, beginning with
      <code>scheme:</code>.
      <ul>
        <li>If no URL is given, no hyperlink is created.
      </ul>
  <li><dt>icon=&lt;value&gt;</dt>: Defines the icon to use. See <a
      href="#icons">Icons</a> for how to define the value.
  <li><dt>Checkbox</dt>: If <code>[ ]</code> or <code>[x]</code> is at the
      start of a line, render a standard checkbox for this item, so it can be
      used as a todo list item. Custom checkboxes with icons can also be used
      by specifying <code>[]:name</code> where <i>name</i> is the name of a
      <code>!checkbox</code> definition, see <a
      href="#checkboxes">Checkboxes</a> for more details.
  <li><dt>url=URL</dt>: Target of this link. If this exists, no URL is
      attempted to be recognized in the rest of the line. So this is also a way
      to override the URL (possibly to empty) if a URL occurs in the Name too.
  <li><dt>target=target</dt>: Open the URL in the defined target. Typical values are:
      <ul>
        <li><code>absent</code>: Use same window (default)
        <li><code>_blank</code>: Use a new window or tab.
	<li><code>manual</code>: Display text to instruct the user to paste the
	    user to manually paste the URL in the address bar.
      </ul>	
</ul>
The elements may be specified in any order on the line.
</p>


<a name="link-examples"></a>
<h4>Example Links</h4>

<p>
Below is an example of lines specifying a Link.
</p>

<p>
Different combinations of links and names.
<pre>
  Example                              : Just a string 'Example' without link
  http://example.com                   : Link with name http://example.com and icon http://example.com/favicon.ico
  Example http://example.com           : Same link with name 'Example'
  Example icon=none http://example.com : Same link, but no Icon
  Example:3                            : Show 'Example:3', linking to the URL Example:3, because it also matches schema:location
  Example:3 url=                       : Show 'Example:3' without link
</pre>
Submenus and indentation levels.
<pre>
  Submenu http://example.com           : Item 'Submenu' that is a link and has sub-Items.
    ...
  Submenu                              : Submenu without link
    ...
  http://example.com                   : Submenu with link that is used as name too
    ...
</pre>
Hidden names.
<pre>
  _                                    : Will not be displayed
  _ http://example.com                 : Will display a clickable icon
  _ icon=none http://example.com       : Will display 'Heading' that is clickable
    _ icon=empty http://example.com    : Will display 'Block' that is clickable
      _ icon=empty http://example.com  : Will display 'Item' that is clickable
</pre>
Checkboxes.
<pre>
  [ ]                                  : Displays a checkbox without label
  [] _                                 : Same thing
  [x] http://example.com               : Display checkbox with link
</pre>
Specifying icons.
<pre>
  !icondef www.example.com https://static.example.com/assets/icon1.png
  !icondef icon2 https://static.example.com/assets/icon2.png
  !icondef iconToo icon2
  http://example.com                   : Uses icon http://example.com/favicon.ico (default)
  http://www.example.com               : Uses icon icon1.png from !icondef above (implicit)
  icon=icon2 http://www.example.com    : Uses icon icon2.png from !icondef above (explicit)
  icon=iconToo http://www.example.com  : Uses icon icon2.png from !icondef above (expliciti, recursive)
  icon=alt http://example.com          : Use alternate
  icon=alt:google http://example.com   : Use alternate from Google
  icon=html:&lt;span&amp;space;style="color:green"&gt;&amp;#x2714;&lt;/span&gt; http://example.com
</pre>
</p>


<a name="icons"></a>
<h2>Icons</h2>

<p>
At different places, icons can be used. An icon can be any of the following
values:
<ul>
<li>URL: This URL is used as the image URL of the icon.
<li><code>default</code>: If value is default or no icon is given, the URL
    domain + <code>favicon.ico</code> is used. If the URL domain is the name of
    an !icondef, that value is used.
<li><code>none</code>: No image is rendered.
<li><code>empty</code>: An empty image is rendered.
<li><code>alt:&lt;method&gt;?&lt;url&gt;</code>: Instead of the website's icon
    (which may be inaccessible due to referer restrictions), use the specified
    alternative method. Current methods are:
    <ul>
      <li><code>google</code>: Use Google's database.
      <li><code>*</code>, <code>any</code>: Use any of the known methods. This
          is the default if <code>:&lt;method&gt;</code> is not specified.
    </ul>
    If <code>?&lt;url&gt;</code> is specified, that URL is used, otherwise the
    target URL is used as a base for the alternative method.
<li><code>char:&lt;x&gt;</code>: Use the (unicode) character or (short) text
    after the colon to create an icon. To use, a Unicode character, it can be
    entered in either UTF-8 encoding or as U+xxxxx for the codepoint with
    hexadecimal number xxxxx, e.g.  <code>char:U+2661</code> (white heart,
    &#x2661;).
<li><code>html:&lt;fragment&gt;</code>: Use the specified HTML fragment after
    the colon to create a &lt;div&gt;. The contents is scaled to a square. To
    include a space in the fragment use &amp;space; (or the shorthand &amp;sp;
    or &amp;spc;).
</ul>
</p>


<a name="checkboxes"></a>
<h2>Checkboxes</h2>

<p>
Standard checkboxes can be defined in an <a
href="https://www.markdownguide.org/extended-syntax/#task-lists">Extended
Markdown</a> way:
<pre>
- [ ] Unchecked value
- [x] Checked value
[x] List character is not mandatory
</pre>
The state of the checkbox is stored in the configuration and is updated when
that is enabled.
</p>


<h3>Custom Checkboxes</h3>

<p>
In addition to standard Checkboxes, <code>!checkbox name options...</code> can
be used to define a checkbox type with custom options. The allowed options are:
<ul>
<li><dt>Single letter</dt>: Instead of <code>[x]</code> and <code>[ ]</code>,
    use these letters as checkbox values. The following notations are supported:
    <ul>
    <li><dt>Normal character</dt>: Like 'A', '4', '+', etc.
    <li><dt>Underscore (_)</dt>: Special character interpreted as a space.
    <li><dt>Unicode character</dt>: Literal Unicode characters, like '&#x2611;'
        or '&#x1F44D;'.
    <li><dt>Unicode codepoint</dt>: Unicode codepoint notation, like 'U+2611'
        or 'U+1F44D'.
    </ul>
    See below for examples.
<li><dt>Icon</dt>: By using <code>X=icon</code>, the checkbox <code>[X]</code>
    is displayed as icon, all <a href="#icons">icon definitions</a> can be
    used. See below for examples.
<li><dt>empty</dt>: Shorthand for <code>_=empty</code>.
<li><dt>uncheck</dt>: Shorthand for <code>_=U+2610</code> (empty box, &#x2610;).
<li><dt>check</dt>: Shorthand for <code>U+2611</code> (checked box, &#x2611;).
<li><dt>cross</dt>: Shorthand for <code>U+2612</code> (crossed box, &#x2612;).
<li><dt>mcheck</dt>: Shorthand for <code>U+25A3</code> (filled box, &#x25A3;).
</ul>
The representation of special values can be overridden. E.g. to use a different
icon for the checkmark, use <code>!icondef check
http://example.com/icon.png</code>
</p>

<p>
The checkbox definition defined with <code>!checkbox name</code> can be used
for a specific checkbox by appending the <code>:name</code> with no spaces to
the checkbox.
</p>

<p>
Example 1: Simple checkbox with standard Unicode icons:
<pre>
!checkbox standard _=uncheck x=check
[ ]:standard Option 1
[x]:standard Option 2
</pre>
</p>

<p>
Example 2: Standard checkbox with sub-options:
<pre>
!checkbox sub uncheck check mcheck
[ ]:sub Option 1
[&#x25A3;]:sub Option 2
    [&#x2611;]:sub Option 2-1
    [ ]:sub Option 2-2
</pre>
</p>

<p>
Example 3: Checkbox with 3 values, A, B and C:
<pre>
!checkbox letters A B C
[A]:letters Option 1
[B]:letters Option 2
[C]:letters Option 3
</pre>
</p>

<p>
Example 4: Checkbox with 3 values, unknown (&#x2753;), thumbs-up (&#x1F44D;)
and thumbs-down (&#x1F44E;):
<pre>
!checkbox yesno _=U+2753 yes=U+1F44D no=U+1F44E
[ ]:yesno Option 1
[yes]:yesno Option 2
[no]:yesno Option 3
</pre>
</p>

<p>
Example 5: It is also possible to copy the unicode characters directly into
the definition. E.g. from <a href="https://www.unicode.org/emoji/charts/full-emoji-list.html">Full Emoji List, v16.0</a>,
copy the icon in the 'Sample' column for characters U+1F641, U+1F610 and
U+1F642.
<pre>
!checkbox emo üôÅ üòê üôÇ
[&#x1F641;]:emo Option 1
[&#x1F610;]:emo Option 2
[&#x1F642;]:emo Option 3
</pre>
</p>

<p>
Example 6: Checkbox with 7 values, empty, check and 5 icons where '1' and '3'
show the same icon because of the !icondef and '2' and '5' also show the same
icon because both options have the same display value. The check icon
(&#x2611;) is overriden with a checkmark (&#x2714;).
<pre>
!checkbox icons empty check 1=icon1 2=icon2 3=icon3 4=icon4 5=icon2
[1]:icons Option 1
[2]:icons Option 2
!icondef icon1 http://example.com/icon1.png
!icondef icon2 http://example.com/icon2.png
!icondef icon3 icon1
!icondef icon4 char:X
!icondef check char:U+2714
</pre>
</p>


<h3>Overriding Default</h3>

<p>
If no checkbox definition is supplied, the default checkbox definition is used.
If that is not defined, the standard checkboxes are used. By defining a default
checkbox definition, the behevior of all default checkboxes can be changed. As
an example, the example below make all checkboxes have 3 states: &#x2753;
(U+2753), a green <span style="color:green">&#x2714;</span> (U+2714) and a red
&#x274C; (U+274C).
<pre>
!checkbox default _=U+2753 x=html:&lt;span&amp;sp;style="color:green"&gt;&amp;#x2714;&lt;/span&gt; -=U+274C
[ ] Unknown
[x] Yes
[-] No
</pre>
</p>


<a name="search-functions"></a>
<h2>New Search Function</h2>

<p>
The line <code>!search identifier | label | tooltip | icon |
url-template</code> defines a search button to be displayed next to the search
box. The fields are separated by <code>|</code> with whitespace allowed.  These
are the fields to be specified:
<ul>
<li><dt>Identifier</dt> (mandatory): Unique name for this button definition.
<li><dt>Label</dt> (default: <i>Identifier</i>): This is the text to be
    displayed next to the icon on the button. If '_' is specified, no label
    will be displayed.
<li><dt>Tooltip</dt> (default: <i>Identifier</i>): This is the text to be
    displayd if the mouse is hovered over the button. If '_' is specified, no
    tooltip will be displayed.
<li><dt>Icon</dt> (default: <code>default</code> if SearchFunction exists,
    <code>char:U+1F50D</code> (magnifying glass, &#x1F50D;) if not):
    This is the specification of the icon to display. See the <a
    href="#icons">Icons</a> for the syntax.
<li><dt>URL-Template</dt>: If this is defined, this string is used as the
    Search URL Function result. This template recogizes the following special
    values:
    <ul>
    <li><dt>%urlinput</dt>: This will be filled with the URL-encoded search
        string.
    </ul>
    If the URL-Template is not supplied, it is derived as described below.
</ul>
</p>

<p>
The following properties are derived:
<ul>
<li><dt>Search URL Function</dt>:
    Function to call to retrieve the URL to go to for the results if
    the search query does not look like a domain.
    Input of this function is the contents of the SearchBox.
    This function is found by looking up the Identifier in
    SearchFunctions and then the 'text' sub-function.
    If no SearchFunction can be found, use the one with
    Identifier='default'.
<li><dt>Domain Search URL Function</dt>:
    Function to call to retrieve the URL to go to for the results if
    the search query does look like a domain.
    Input of this function is the contents of the SearchBox.
    This function is found by looking up the Identifier in
    SearchFunctions and then the 'domain' sub-function.
    If no SearchFunction can be found, use the one with
    Identifier='default'.
</ul>
</p>

<p>
Pre-defined Identifiers (case-insensitive) are:
<ul>
<li><code>Duck Duck Go</code>: Use Duck Duck Go for text
<li><code>Google</code>: Use Google Search for text
<li><code>Wikipedia</code>: Use Wikipedia for text
<li><code>YouTube</code>: Use YouTube for text
<li><code>Wayback Machine</code>: Use Wayback Machine Internet Arcive for both
    text and domains.
<li><code>Google Maps</code>: Use Google Maps for text
<li><code>default</code>: Text search returns null to ignore the search.
    Domain search returns the input as URL to bypass a results page.
</ul>
</p>

<p>
In JavaScript, <code>SearchFunction</code> can be extended with additional
functions that can be used for new buttons. The field name in SearchFunction
<u>must</u> be all <u>lowercase</u>. The function should have a single argument
that is the string to search for. The function should return a URL to go to for
the search results.
<br>
The function <code>getTemplateUrl</code> can be used to generate such a
function, based on a template of the URL.
<br>
Note that this function is also used to try and find a
<code>favicon.ico</code>.
</p>

<p>
The <code>SearchFunction</code> has the following sub-keys:
<ul>
<li><code>'domain'</code>: This function is called when the search text
    resembles a domain name.
<li><code>'text'</code>: This function is called to search other text.
</ul>
</p>

<p>
The JavaScript functions are available to create new SearchFunctions:
<ul>
<li><code>registerSearchTemplate(&lt;Identifier&gt;, &lt;URL-Template&gt;)</code>:
    This function creates a Search URL Function, based on the specified
    &lt;URL-Template&gt;. It then registers this function for the specified
    Identifier.  This function is also used when the &lt;URL-Template&gt;
    parameter of the <code>!search</code> command is used.
<li><code>registerSearchFunction(&lt;Identifier&gt;, &lt;function&gt;)</code>:
    This function registers a Search URL Function for the specified Identier.
    This function receives the search text as input and should return a URL
    as output.
<li><code>getRegisteredSearchUrl(&lt;Identifier&gt;, &lt;search-text&gt;)</code>:
    Returns the Text Search URL to search for search-text that is registered
    for Identifier.
</ul>
</p>

<p>
Example on how to create a search button for Amazon:
<pre>
!search Amazon |||| https://www.amazon.com/s?k=%urlinput
</pre>
</p>

<p>
Search buttons can be quite flexible. For example, the current Sprint Board
on Azure DevOps  can be searched with the URL
<code>https://dev.azure.com/&lt;Organization&gt;/&lt;Project&gt;/_sprints/taskboard/&lt;Team&gt;/&lt;Project&gt;/?text=&lt;Search-Terms&gt;</code>.
Now, create a search button to search the current sprint board of MyProject for
MyTeam within MyOrganization in a few steps:
<pre>
!search MyTeam-Sprint | MyTeam | Current MyTeam Sprint | alt | https://dev.azure.com/MyOrganization/MyProject/_sprints/taskboard/MyTeam/MyProject/?text=%urlinput
</pre>
Note that https://dev.azure.com does not have a favicon that can be used.
Therefore, specify to use the alternate icon. Now the button gets the correct
icon.
</p>

<p>
Silly example for a Random button:
<pre>
!search Random |_|| html:&amp;#x2753;
!script
registerSearchTemplate('xkcd', 'https://c.xkcd.com/random/comic/');
registerSearchFunction('random', input =&gt; {
    let options = [ 'google', 'duck duck go', 'wikipedia', 'amazon', 'xkcd' ];
    let r = Math.trunc(Math.random() * options.length);
    return getRegisteredSearchUrl(options[r], input);
});
!endscript
</pre>
</p>


<a name="themes"></a>
<h2>Themes</h2>

<p>
Themes are implemented in a very basic way. The colors that are used are
defined as CSS variables in a *-theme CSS class. Currently there is a
<code>dark-theme</code> and and a <code>light-theme</code>.
<br>
The theme can be changed by using <code>!theme name</code> where name is the
CSS class name of the theme or <code>auto</code> (the default)  in which case
the browser's dark/light-mode preference setting is used.
</p>

<p>
The current variables are:
<ul>
<li><dt>--foreground</dt>,
    <dt>--background</dt>:
    Default foreground and background colors.
<li><dt>--accent-color</dt>:
    Color for titles, labels and icons.
<li><dt>--block-foreground</dt>,
    <dt>--block-background</dt>,
    <dt>--block-border</dt>:
    Foreground, background and border colors for Block level items.
<li><dt>--selection-foreground</dt>,
    <dt>--selection-background</dt>:
    Foreground and background color for selected text.
<li><dt>--code-foreground</dt>,
    <dt>--code-background</dt>:
    Foreground and background color for <code>&lt;code&gt;</code> and
    <code>&lt;pre&gt;</code> fragments.
<li><dt>--link-color</dt>: 
    Foreground color of hyperlinks.
<li><dt>--disabled-color</dt>:
    Foreground color for disabled items.
<li><dt>--error-foreground</dt>,
    <dt>--error-background</dt>,
    <dt>--error-border</dt>:
    Foreground, background and border color for search box in case of
    unrecognized input.
</ul>
</p>

<p>
A theme can be modified like this:
<pre>
!style
.dark-theme {
    --accent-color: #CC6600;
} 
!endstyle
</pre>
Or you can go wild with:
<pre>
!style
body {
    background-image: linear-gradient(120deg, red,orange,yellow,green,blue,indigo,violet,red,orange,yellow,green,blue,indigo,violet);
}
.dark-theme {
    --background: #2E323B99;
    --code-background: #28282899;
    --block-background: #C9CDD099;
}
.light-theme {
    --background: #E8F0F877;
    --code-background: #C0C0C077;
    --block-background: #D9DDE099;
}
!endstyle
</pre>
Or more rustic with:
<pre>
!style
body {
	filter: sepia(0.7);
}
!endstyle
</pre>
</p>


</body>

</html>

<!-- vim: set fdm=marker: -->

